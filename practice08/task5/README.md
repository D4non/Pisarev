## Описание задачи

Задача демонстрирует реализацию механизма повторных попыток (retry) с экспоненциальной задержкой для асинхронных операций. Этот паттерн особенно полезен при работе с ненадежными операциями, такими как сетевые запросы, доступ к базе данных или внешним API.

## Используемые технологии и библиотеки
### 1. .NET Core

- **Асинхронное программирование** - ```async/await```, ```Task<T>```

- **Функциональное программирование** - делегаты ```Func<Task<T>>```

### 2. Пространства имен

- ```System``` - базовые типы и исключения

- ```System.Threading.Tasks``` - для асинхронных операций и задержек


## Детали реализации
### Структура программы

```    
using System;
using System.Threading.Tasks;

class Program
{
    static async Task Main()
    {
        // 1. Счетчик попыток для демонстрации
        int attempt = 0;
        
        // 2. Вызов метода с повторными попытками
        var result = await RetryAsync(async () =>
        {
            attempt++;
            Console.WriteLine($"Попытка {attempt}");
            
            // 3. Имитация ошибок в первых двух попытках
            if (attempt < 3)
                throw new Exception("Ошибка");
                
            return "Успех";
        }, maxAttempts: 5);
        
        // 4. Вывод конечного результата
        Console.WriteLine($"Результат: {result}");
    }

    // 5. Основной метод для повторных попыток
    static async Task<T> RetryAsync<T>(Func<Task<T>> action, int maxAttempts)
    {
        int delay = 1000;  // Начальная задержка 1 секунда
        
        // 6. Цикл попыток выполнения
        for (int attempt = 1; attempt <= maxAttempts; attempt++)
        {
            try
            {
                // 7. Попытка выполнения операции
                return await action();
            }
            catch
            {
                // 8. Обработка ошибки
                if (attempt == maxAttempts) throw;
                
                // 9. Задержка перед следующей попыткой
                await Task.Delay(delay);
                delay *= 2;  // Экспоненциальное увеличение задержки
            }
        }
        
        // 10. Теоретически недостижимый код
        throw new InvalidOperationException();
    }
}
```

### Делегат ```Func<Task<T>>```

- Принимает асинхронную операцию, возвращающую результат типа ```T```

- Позволяет передавать любую асинхронную операцию как параметр

### Экспоненциальная задержка

- Первая задержка: 1000 мс (1 секунда)

- Вторая задержка: 2000 мс (2 секунды)

- Третья задержка: 4000 мс (4 секунды) и т.д.