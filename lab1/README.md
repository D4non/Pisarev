# Лабораторная работа 1
## Тема: Сериализация JSON, управление ресурсами и работа с файлами в C#

### Цели работы
1. Освоить использование атрибутов JSON для управления процессом сериализации/десериализации
2. Изучить паттерн IDisposable для корректного освобождения ресурсов
3. Научиться работать с файловой системой (чтение/запись файлов)
4. Реализовать сохранение и загрузку объектов в/из файлов JSON
5. Понимать разницу между явным освобождением ресурсов через Dispose() и автоматическим через финализатор

---

## Структура проекта

### Класс Person
Класс для представления персоны с следующими свойствами:
- `FirstName` - имя (обычное свойство)
- `LastName` - фамилия (обычное свойство)
- `Age` - возраст (обычное свойство)
- `Email` - электронная почта с валидацией (проверка наличия символа '@')
- `Password` - пароль (с атрибутом `[JsonIgnore]` - не сериализуется)
- `Id` - идентификатор (с атрибутом `[JsonPropertyName("personId")]` - в JSON как "personId")
- `_birthDate` - дата рождения (private поле с атрибутом `[JsonInclude]`, доступ через свойство `BirthDate`)
- `PhoneNumber` - номер телефона (с атрибутом `[JsonPropertyName("phone")]` - в JSON как "phone")

### Класс PersonSerializer
Класс для сериализации и десериализации объектов Person в/из JSON формата.

**Методы:**
1. `SerializeToJson(Person person)` - сериализация в строку
2. `DeserializeFromJson(string json)` - десериализация из строки
3. `SaveToFile(Person person, string filePath)` - сохранение в файл (синхронно)
4. `LoadFromFile(string filePath)` - загрузка из файла (синхронно)
5. `SaveToFileAsync(Person person, string filePath)` - сохранение в файл (асинхронно)
6. `LoadFromFileAsync(string filePath)` - загрузка из файла (асинхронно)
7. `SaveListToFile(List<Person> people, string filePath)` - экспорт нескольких объектов
8. `LoadListFromFile(string filePath)` - импорт списка объектов

**Особенности:**
- Использует красивое форматирование JSON (WriteIndented = true)
- Кодировка UTF-8 для всех текстовых операций

### Класс FileResourceManager
Класс для управления файловыми ресурсами с реализацией интерфейса `IDisposable`.

**Поля:**
- `_fileStream` - поток для работы с файлом
- `_writer` / `_reader` - для текстовых операций
- `_disposed` - флаг освобождения ресурсов
- `_filePath` - путь к файлу

**Методы:**
- `OpenForWriting()` - открывает файл для записи
- `OpenForReading()` - открывает файл для чтения
- `WriteLine(string text)` - записывает строку в файл
- `ReadAllText()` - читает весь файл
- `AppendText(string text)` - добавляет текст в конец файла
- `GetFileInfo()` - возвращает информацию о файле (размер, дата создания)
- `Dispose()` - освобождает ресурсы

**Особенности реализации:**
- Реализация IDisposable для корректного освобождения ресурсов
- Проверка состояния объекта перед операциями
- Автоматическое создание директорий при необходимости


---

## Структура файлов

```
lab1/
├── Person.cs                  # Класс Person
├── PersonSerializer.cs        # Класс для сериализации
├── FileResourceManager.cs     # Класс для управления файловыми ресурсами
├── Program.cs                 # Точка входа и тесты
└── README.md                  # Документация
```

---

## Особенности реализации

### Кодировка
Все текстовые операции используют кодировку UTF-8.

### JSON форматирование
JSON сериализуется с отступами для читаемости (WriteIndented = true).

### Управление ресурсами
Класс `FileResourceManager` реализует интерфейс `IDisposable` для корректного освобождения файловых потоков.

---